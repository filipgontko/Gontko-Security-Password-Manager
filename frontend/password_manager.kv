<Signup>:
    name: "signup"
    MDCard:
        size_hint: None, None
        size: 300, 400
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        elevation: 25
        padding: 25
        spacing: 25
        orientation: "vertical"

        MDLabel:
            id: welcome_label
            text: "Gontko Security"
            font_size: 20
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 10

        MDTextFieldRound:
            id: email
            hint_text: "e-mail"
            icon_right: "account"
            required: True
            size_hint_x: None
            width: 200
            font_size: 15
            pos_hint: {"center_x": 0.5}

        MDTextFieldRound:
            id: password
            hint_text: "master password"
            icon_right: "eye-off"
            required: True
            size_hint_x: None
            width: 200
            font_size: 15
            pos_hint: {"center_x": 0.5}
            password: True

        Widget:
            size_hint_y: None
            height: 5

        MDRoundFlatButton:
            text: "SIGN UP"
            font_size: 12
            pos_hint: {"center_x": 0.5}
            on_release:
                root.signup(email.text, password.text)
                email.text = ""
                password.text = ""
                app.root.current = "logged_in"
                root.manager.transition.direction = "left"

        Widget:
            size_hint_y: None
            height: 10

<Login>:
    name: "login"
    MDCard:
        size_hint: None, None
        size: 300, 400
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        elevation: 25
        padding: 25
        spacing: 25
        orientation: "vertical"

        MDLabel:
            id: welcome_label
            text: "Gontko Security"
            font_size: 20
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            padding_y: 10

        MDTextFieldRound:
            id: email
            hint_text: "e-mail"
            icon_right: "account"
            required: True
            size_hint_x: None
            width: 200
            font_size: 15
            pos_hint: {"center_x": 0.5}
            normal_color: app.theme_cls.accent_color

        MDTextFieldRound:
            id: login_password
            hint_text: "master password"
            icon_right: "key"
            required: True
            size_hint_x: None
            width: 200
            font_size: 15
            pos_hint: {"center_x": 0.5}
            password: True
            normal_color: app.theme_cls.accent_color

        Widget:
            size_hint_y: None
            height: 5

        MDRoundFlatButton:
            text: "LOG IN"
            font_size: 12
            pos_hint: {"center_x": 0.5}
            on_release:
                root.login(email.text, login_password.text)
                root.manager.transition.direction = "left"
                email.text = ""
                login_password.text = ""

        MDRoundFlatButton:
            text: "FORGOT PASSWORD"
            font_size: 12
            pos_hint: {"center_x": 0.5}
            on_release: root.forgot_password()

        Widget:
            size_hint_y: None
            height: 10

<LoggedIn>:
    name: "logged_in"
    MDBoxLayout:
        orientation: "vertical"
        MDToolbar:
            title: "Gontko Security Password Manager"
            left_action_items: [["security", lambda x: app.navigation_draw()]]
            md_bg_color: app.theme_cls.primary_dark

            MDFillRoundFlatButton:
                text: "Log Out"
                font_size: 12
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                on_release:
                    root.logout()
                    app.root.current = "login"
                    root.manager.transition.direction = "right"

        MDGridLayout:
            cols: 2
            md_bg_color: app.theme_cls.primary_color
            spacing: 10
            padding: 10

            MDCard:
                orientation: "vertical"
                size: root.width, root.height

                MDBoxLayout:
                    adaptive_height: True

                    MDIconButton:
                        icon: "magnify"

                    MDTextField:
                        id: search_field
                        hint_text: "Search credentials"
                        on_text: root.set_list_credentials(self.text, True)

                RecycleView:
                    id: rv
                    key_viewclass: "viewclass"
                    key_size: "height"

                    RecycleBoxLayout:
                        padding: dp(10)
                        default_size: None, dp(60)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: "vertical"

            MDCard:
                orientation: "vertical"
                size: root.width, root.height

                MDCard:
                    size_hint: None, None
                    size: 350, 484
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    padding: 20
                    spacing: 5
                    orientation: "vertical"
                    elevation: 10
                    md_bg_color: app.theme_cls.primary_dark
                    MDLabel:
                        id: enter_creds
                        text: "Create new credentials"
                        font_size: 20
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 2

                    MDTextField:
                        id: website
                        hint_text: "website"
                        icon_right: "web"
                        required: True
                        helper_text_mode: "on_focus"
                        mode: "rectangle"
                        size_hint_x: None
                        width: 200
                        font_size: 15
                        pos_hint: {"center_x": 0.5}
                        on_focus: self.required = False if self.text == "" else True

                    MDTextField:
                        id: username
                        hint_text: "username"
                        icon_right: "account"
                        required: True
                        helper_text_mode: "on_focus"
                        mode: "rectangle"
                        size_hint_x: None
                        width: 200
                        font_size: 15
                        pos_hint: {"center_x": 0.5}
                        on_focus: self.required = False if self.text == "" else True

                    MDTextField:
                        id: passwd
                        hint_text: "password"
                        icon_right: "key"
                        required: True
                        helper_text_mode: "on_focus"
                        mode: "rectangle"
                        size_hint_x: None
                        width: 200
                        font_size: 15
                        pos_hint: {"center_x": 0.5}
                        password: True
                        on_focus: self.required = False if self.text == "" else True

                    Widget:
                        size_hint_y: None
                        height: 3

                    MDFillRoundFlatButton:
                        text: "Add Credentials"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            root.add_credentials(website.text, username.text, passwd.text)
                            website.text = ""
                            username.text = ""
                            passwd.text = ""

                    Widget:
                        size_hint_y: None
                        height: 15

                    MDSeparator:
                            height: 1

                    Widget:
                        size_hint_y: None
                        height: 5

                    MDLabel:
                        text: "Password Generator"
                        font_size: 20
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]

                    MDTextFieldRect:
                        id: generate_pwd
                        size_hint_y: None
                        height: "30dp"

                    MDSlider:
                        id: strength_slider
                        min: 12
                        max: 32
                        step: 1
                        size_hint_y: None
                        size: sp(32), sp(32)
                        color: app.theme_cls.accent_dark

                    MDFillRoundFlatButton:
                        text: "Generate Password"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_release: generate_pwd.text = root.generate_password(strength_slider.value)

                    Widget:
                        size_hint_y: None
                        height: 10

                Widget:
                    size_hint_y: None
                    height: 16

<ClickableEyeIcon>:
    size_hint_y: None
    height: text_field.height
    MDTextField:
        id: text_field
        mode: "fill"
        text: root.text
        hint_text: "password"
        size_hint_x: None
        width: 300
        font_size: 15
        pos_hint: {"center_x": 0.5}
        password: True

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: text_field.width - self.width + dp(4), 0
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 0.5
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            text_field.password = False if text_field.password is True else True

<CredentialsView>
    name: "creds_view"
    MDBoxLayout:
        orientation: "vertical"
        MDToolbar:
            title: "Gontko Security Password Manager"
            left_action_items: [["security", lambda x: app.navigation_draw()]]
            md_bg_color: app.theme_cls.primary_dark

            MDFillRoundFlatButton:
                text: "Go Back"
                font_size: 12
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                on_release:
                    app.root.current = "logged_in"
                    root.manager.transition.direction = "right"

        MDGridLayout:
            cols: 2
            md_bg_color: app.theme_cls.primary_color
            spacing: 10
            padding: 10

            MDCard:
                orientation: "vertical"
                size: root.width, root.height
                padding: 10
                spacing: 15

                MDTextField:
                    id: username
                    icon_right: "account"
                    mode: "fill"
                    hint_text: "username"
                    size_hint_x: None
                    width: 300
                    font_size: 15
                    pos_hint: {"center_x": 0.5}

                ClickableEyeIcon:
                    id: passwd
                    size_hint_x: None
                    width: 300
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}

                Widget:
                    size_hint_y: None
                    height: 20

                MDTextField:
                    id: website
                    icon_right: "web"
                    hint_text: "website"
                    size_hint_x: None
                    width: 295
                    font_size: 15
                    pos_hint: {"center_x": 0.5}

                Widget:
                    size_hint_y: None
                    height: 10

                MDBoxLayout:
                    orientation: "horizontal"
                    size_hint: None, None
                    size: 290,80
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    padding: 45
                    spacing: 25

                    MDRoundFlatButton:
                        text: "Delete"
                        font_size: 12
                        on_release: root.show_dialog("delete")

                    MDFillRoundFlatButton:
                        text: "Save"
                        font_size: 12
                Widget:
                    size_hint_y: None
                    height: 20


            MDCard:
                orientation: "vertical"
                size: root.width, root.height
                MDCard:
                    size_hint: None, None
                    size: 350, 200
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    padding: 20
                    spacing: 5
                    orientation: "vertical"
                    elevation: 10
                    md_bg_color: app.theme_cls.primary_dark

                    MDLabel:
                        text: "Password Generator"
                        font_size: 20
                        halign: "center"
                        size_hint_y: None
                        height: self.texture_size[1]

                    MDTextFieldRect:
                        id: generate_pwd
                        size_hint_y: None
                        height: "30dp"

                    MDSlider:
                        id: strength_slider
                        min: 12
                        max: 32
                        step: 1
                        size_hint_y: None
                        size: sp(32), sp(32)
                        color: app.theme_cls.accent_dark

                    MDFillRoundFlatButton:
                        text: "Generate Password"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_release: generate_pwd.text = root.generate_password(strength_slider.value)

                    Widget:
                        size_hint_y: None
                        height: 10

                Widget:
                    size_hint_y: None
                    height: 16